<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Stomp::Client [Stomp]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Stomp::Client
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/stomp/client_rb.html">lib/stomp/client.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Typical <a href="../Stomp.html">Stomp</a> client class. Uses a listener
            thread to receive frames from the server, any thread can send.
            </p>
            <p>
            Receives all happen in one thread, so consider not doing much processing in
            that thread if you have much message volume.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000011">new</a></li>
              <li><a href="#M000012">open</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000015">abort</a></li>
              <li><a href="#M000019">acknowledge</a></li>
              <li><a href="#M000014">begin</a></li>
              <li><a href="#M000028">close</a></li>
              <li><a href="#M000027">closed?</a></li>
              <li><a href="#M000016">commit</a></li>
              <li><a href="#M000024">connection_frame</a></li>
              <li><a href="#M000025">disconnect_receipt</a></li>
              <li><a href="#M000013">join</a></li>
              <li><a href="#M000022">obj_send</a></li>
              <li><a href="#M000026">open?</a></li>
              <li><a href="#M000021">publish</a></li>
              <li><a href="#M000029">running</a></li>
              <li><a href="#M000023">send</a></li>
              <li><a href="#M000017">subscribe</a></li>
              <li><a href="#M000020">unreceive</a></li>
              <li><a href="#M000018">unsubscribe</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>host</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>login</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>parameters</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>passcode</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>port</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>reliable</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000011'>
                <a name='M000011'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(login = '', passcode = '', host = 'localhost', port = 61613, reliable = false)</span>
                </div>
                <div class='description'>
                  <p>
                  A new <a href="Client.html">Client</a> object can be initialized using two
                  forms:
                  </p>
                  <p>
                  Standard positional parameters:
                  </p>
                  <pre>login     (String,  default : '')&#x000A;passcode  (String,  default : '')&#x000A;host      (String,  default : 'localhost')&#x000A;port      (Integer, default : 61613)&#x000A;reliable  (Boolean, default : false)&#x000A;&#x000A;e.g. c = Client.new('login', 'passcode', 'localhost', 61613, true)</pre>
                  <p>
                  <a href="../Stomp.html">Stomp</a> URL :
                  </p>
                  <pre>A Stomp URL must begin with 'stomp://' and can be in one of the following forms:&#x000A;&#x000A;stomp://host:port&#x000A;stomp://host.domain.tld:port&#x000A;stomp://login:passcode@host:port&#x000A;stomp://login:passcode@host.domain.tld:port</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000011-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000011-source'>    <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 35</span>&#x000A;35:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">login</span> = <span class="ruby-value str">''</span>, <span class="ruby-identifier">passcode</span> = <span class="ruby-value str">''</span>, <span class="ruby-identifier">host</span> = <span class="ruby-value str">'localhost'</span>, <span class="ruby-identifier">port</span> = <span class="ruby-value">61613</span>, <span class="ruby-identifier">reliable</span> = <span class="ruby-keyword kw">false</span>)&#x000A;36: &#x000A;37:       <span class="ruby-comment cmt"># Parse stomp:// URL's or set params</span>&#x000A;38:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">login</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;39:         <span class="ruby-ivar">@parameters</span> = <span class="ruby-identifier">login</span>&#x000A;40:         &#x000A;41:         <span class="ruby-identifier">first_host</span> = <span class="ruby-ivar">@parameters</span>[<span class="ruby-identifier">:hosts</span>][<span class="ruby-value">0</span>]&#x000A;42:         &#x000A;43:         <span class="ruby-ivar">@login</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:login</span>]&#x000A;44:         <span class="ruby-ivar">@passcode</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:passcode</span>]&#x000A;45:         <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:host</span>]&#x000A;46:         <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:port</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Connection</span><span class="ruby-operator">::</span><span class="ruby-identifier">default_port</span>(<span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:ssl</span>])&#x000A;47:         &#x000A;48:         <span class="ruby-ivar">@reliable</span> = <span class="ruby-keyword kw">true</span>&#x000A;49:         &#x000A;50:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">login</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^stomp:\/\/(([\w\.]+):(\w+)@)?([\w\.]+):(\d+)/</span> <span class="ruby-comment cmt"># e.g. stomp://login:passcode@host:port or stomp://host:port</span>&#x000A;51:         <span class="ruby-ivar">@login</span> = <span class="ruby-identifier">$2</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>&#x000A;52:         <span class="ruby-ivar">@passcode</span> = <span class="ruby-identifier">$3</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>&#x000A;53:         <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">$4</span>&#x000A;54:         <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">$5</span>.<span class="ruby-identifier">to_i</span>&#x000A;55:         <span class="ruby-ivar">@reliable</span> = <span class="ruby-keyword kw">false</span>&#x000A;56:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">login</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^failover:(\/\/)?\(stomp(\+ssl)?:\/\/(([\w\.]*):(\w*)@)?([\w\.]+):(\d+)(,stomp(\+ssl)?:\/\/(([\w\.]*):(\w*)@)?([\w\.]+):(\d+)\))+(\?(.*))?$/</span> <span class="ruby-comment cmt"># e.g. failover://(stomp://login1:passcode1@localhost:61616,stomp://login2:passcode2@remotehost:61617)?option1=param</span>&#x000A;57: &#x000A;58:         <span class="ruby-identifier">first_host</span> = {}&#x000A;59:         <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:ssl</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">$2</span>.<span class="ruby-identifier">nil?</span>&#x000A;60:         <span class="ruby-ivar">@login</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:login</span>] = <span class="ruby-identifier">$4</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>&#x000A;61:         <span class="ruby-ivar">@passcode</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:passcode</span>] = <span class="ruby-identifier">$5</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>&#x000A;62:         <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-identifier">$6</span>&#x000A;63:         <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:port</span>] = <span class="ruby-identifier">$7</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Connection</span><span class="ruby-operator">::</span><span class="ruby-identifier">default_port</span>(<span class="ruby-identifier">first_host</span>[<span class="ruby-identifier">:ssl</span>])&#x000A;64:         &#x000A;65:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">$16</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>&#x000A;66:         <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/&amp;|=/</span>)&#x000A;67:         <span class="ruby-identifier">options</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-operator">*</span><span class="ruby-identifier">parts</span>]&#x000A;68:         &#x000A;69:         <span class="ruby-identifier">hosts</span> = [<span class="ruby-identifier">first_host</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">parse_hosts</span>(<span class="ruby-identifier">login</span>)&#x000A;70:         &#x000A;71:         <span class="ruby-ivar">@parameters</span> = {}&#x000A;72:         <span class="ruby-ivar">@parameters</span>[<span class="ruby-identifier">:hosts</span>] = <span class="ruby-identifier">hosts</span>&#x000A;73:         &#x000A;74:         <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-identifier">filter_options</span>(<span class="ruby-identifier">options</span>)&#x000A;75:                 &#x000A;76:         <span class="ruby-ivar">@reliable</span> = <span class="ruby-keyword kw">true</span>&#x000A;77:       <span class="ruby-keyword kw">else</span>&#x000A;78:         <span class="ruby-ivar">@login</span> = <span class="ruby-identifier">login</span>&#x000A;79:         <span class="ruby-ivar">@passcode</span> = <span class="ruby-identifier">passcode</span>&#x000A;80:         <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">host</span>&#x000A;81:         <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">port</span>.<span class="ruby-identifier">to_i</span>&#x000A;82:         <span class="ruby-ivar">@reliable</span> = <span class="ruby-identifier">reliable</span>&#x000A;83:       <span class="ruby-keyword kw">end</span>&#x000A;84: &#x000A;85:       <span class="ruby-identifier">check_arguments!</span>&#x000A;86: &#x000A;87:       <span class="ruby-ivar">@id_mutex</span> = <span class="ruby-constant">Mutex</span>.<span class="ruby-identifier">new</span>&#x000A;88:       <span class="ruby-ivar">@ids</span> = <span class="ruby-value">1</span>&#x000A;89: &#x000A;90:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@parameters</span>&#x000A;91:         <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@parameters</span>)&#x000A;92:       <span class="ruby-keyword kw">else</span>&#x000A;93:         <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@login</span>, <span class="ruby-ivar">@passcode</span>, <span class="ruby-ivar">@host</span>, <span class="ruby-ivar">@port</span>, <span class="ruby-ivar">@reliable</span>)&#x000A;94:       <span class="ruby-keyword kw">end</span>&#x000A;95:       &#x000A;96:       <span class="ruby-identifier">start_listeners</span>&#x000A;97: &#x000A;98:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000012'>
                <a name='M000012'></a>
                <div class='synopsis'>
                  <span class='name'>open</span>
                  <span class='arguments'>(login = '', passcode = '', host = 'localhost', port = 61613, reliable = false)</span>
                </div>
                <div class='description'>
                  <p>
                  Syntactic sugar for &#8216;<a
                  href="Client.html#M000011">Client.new</a>&#8217; See
                  &#8216;initialize&#8217; for usage.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000012-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000012-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 101</span>&#x000A;101:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">login</span> = <span class="ruby-value str">''</span>, <span class="ruby-identifier">passcode</span> = <span class="ruby-value str">''</span>, <span class="ruby-identifier">host</span> = <span class="ruby-value str">'localhost'</span>, <span class="ruby-identifier">port</span> = <span class="ruby-value">61613</span>, <span class="ruby-identifier">reliable</span> = <span class="ruby-keyword kw">false</span>)&#x000A;102:       <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">login</span>, <span class="ruby-identifier">passcode</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, <span class="ruby-identifier">reliable</span>)&#x000A;103:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000015'>
                <a name='M000015'></a>
                <div class='synopsis'>
                  <span class='name'>abort</span>
                  <span class='arguments'>(name, headers = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Abort a transaction by name
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000015-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000015-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 117</span>&#x000A;117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abort</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;118:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">abort</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span>)&#x000A;119: &#x000A;120:       <span class="ruby-comment cmt"># lets replay any ack'd messages in this transaction</span>&#x000A;121:       <span class="ruby-identifier">replay_list</span> = <span class="ruby-ivar">@replay_messages_by_txn</span>[<span class="ruby-identifier">name</span>]&#x000A;122:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">replay_list</span>&#x000A;123:         <span class="ruby-identifier">replay_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">message</span><span class="ruby-operator">|</span>&#x000A;124:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">listener</span> = <span class="ruby-ivar">@listeners</span>[<span class="ruby-identifier">message</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'destination'</span>]]&#x000A;125:             <span class="ruby-identifier">listener</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">message</span>)&#x000A;126:           <span class="ruby-keyword kw">end</span>&#x000A;127:         <span class="ruby-keyword kw">end</span>&#x000A;128:       <span class="ruby-keyword kw">end</span>&#x000A;129:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000019'>
                <a name='M000019'></a>
                <div class='synopsis'>
                  <span class='name'>acknowledge</span>
                  <span class='arguments'>(message, headers = {}) {|r| ...}</span>
                </div>
                <div class='description'>
                  <p>
                  Acknowledge a message, used when a subscription has specified client
                  acknowledgement ( connection.subscribe &#8220;/queue/a&#8220;, :ack =>
                  &#8216;client&#8217;g
                  </p>
                  <p>
                  Accepts a transaction header ( :transaction =>
                  &#8216;some_transaction_id&#8217; )
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000019-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000019-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 158</span>&#x000A;158:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">acknowledge</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;159:       <span class="ruby-identifier">txn_id</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:transaction</span>]&#x000A;160:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">txn_id</span>&#x000A;161:         <span class="ruby-comment cmt"># lets keep around messages ack'd in this transaction in case we rollback</span>&#x000A;162:         <span class="ruby-identifier">replay_list</span> = <span class="ruby-ivar">@replay_messages_by_txn</span>[<span class="ruby-identifier">txn_id</span>]&#x000A;163:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">replay_list</span>.<span class="ruby-identifier">nil?</span>&#x000A;164:           <span class="ruby-identifier">replay_list</span> = []&#x000A;165:           <span class="ruby-ivar">@replay_messages_by_txn</span>[<span class="ruby-identifier">txn_id</span>] = <span class="ruby-identifier">replay_list</span>&#x000A;166:         <span class="ruby-keyword kw">end</span>&#x000A;167:         <span class="ruby-identifier">replay_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">message</span>&#x000A;168:       <span class="ruby-keyword kw">end</span>&#x000A;169:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>&#x000A;170:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'receipt'</span>] = <span class="ruby-identifier">register_receipt_listener</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">r</span>}&#x000A;171:       <span class="ruby-keyword kw">end</span>&#x000A;172:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">ack</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'message-id'</span>], <span class="ruby-identifier">headers</span>&#x000A;173:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000014'>
                <a name='M000014'></a>
                <div class='synopsis'>
                  <span class='name'>begin</span>
                  <span class='arguments'>(name, headers = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Begin a transaction by name
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000014-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000014-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 112</span>&#x000A;112:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">begin</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;113:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">begin</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span>)&#x000A;114:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000028'>
                <a name='M000028'></a>
                <div class='synopsis'>
                  <span class='name'>close</span>
                  <span class='arguments'>(headers={})</span>
                </div>
                <div class='description'>
                  <p>
                  Close out resources in use by this client
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000028-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000028-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 223</span>&#x000A;223:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span> <span class="ruby-identifier">headers</span>={}&#x000A;224:       <span class="ruby-ivar">@listener_thread</span>.<span class="ruby-identifier">exit</span>&#x000A;225:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">disconnect</span> <span class="ruby-identifier">headers</span>&#x000A;226:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000027'>
                <a name='M000027'></a>
                <div class='synopsis'>
                  <span class='name'>closed?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Is this client closed?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000027-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000027-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 218</span>&#x000A;218:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>&#x000A;219:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">closed?</span>&#x000A;220:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000016'>
                <a name='M000016'></a>
                <div class='synopsis'>
                  <span class='name'>commit</span>
                  <span class='arguments'>(name, headers = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Commit a transaction by name
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000016-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000016-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 132</span>&#x000A;132:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;133:       <span class="ruby-identifier">txn_id</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:transaction</span>]&#x000A;134:       <span class="ruby-ivar">@replay_messages_by_txn</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">txn_id</span>)&#x000A;135:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">commit</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span>)&#x000A;136:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000024'>
                <a name='M000024'></a>
                <div class='synopsis'>
                  <span class='name'>connection_frame</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000024-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000024-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 204</span>&#x000A;204:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection_frame</span>&#x000A;205:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">connection_frame</span>&#x000A;206:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000025'>
                <a name='M000025'></a>
                <div class='synopsis'>
                  <span class='name'>disconnect_receipt</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000025-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000025-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 208</span>&#x000A;208:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disconnect_receipt</span>&#x000A;209:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">disconnect_receipt</span>&#x000A;210:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000013'>
                <a name='M000013'></a>
                <div class='synopsis'>
                  <span class='name'>join</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Join the listener thread for this client, generally used to wait for a quit
                  signal
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000013-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000013-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 107</span>&#x000A;107:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join</span>&#x000A;108:       <span class="ruby-ivar">@listener_thread</span>.<span class="ruby-identifier">join</span>&#x000A;109:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000022'>
                <a name='M000022'></a>
                <div class='synopsis'>
                  <span class='name'>obj_send</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000022-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000022-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 195</span>&#x000A;195:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_send</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;196:       <span class="ruby-identifier">__send__</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;197:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000026'>
                <a name='M000026'></a>
                <div class='synopsis'>
                  <span class='name'>open?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Is this client open?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000026-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000026-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 213</span>&#x000A;213:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open?</span>&#x000A;214:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">open?</span>&#x000A;215:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000021'>
                <a name='M000021'></a>
                <div class='synopsis'>
                  <span class='name'>publish</span>
                  <span class='arguments'>(destination, message, headers = {}) {|r| ...}</span>
                </div>
                <div class='description'>
                  <p>
                  Publishes message to destination
                  </p>
                  <p>
                  If a block is given a receipt will be requested and passed to the block on
                  receipt
                  </p>
                  <p>
                  Accepts a transaction header ( :transaction =>
                  &#8216;some_transaction_id&#8217; )
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000021-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000021-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 188</span>&#x000A;188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">publish</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;189:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>&#x000A;190:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'receipt'</span>] = <span class="ruby-identifier">register_receipt_listener</span> <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">r</span>}&#x000A;191:       <span class="ruby-keyword kw">end</span>&#x000A;192:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">publish</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">headers</span>)&#x000A;193:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000029'>
                <a name='M000029'></a>
                <div class='synopsis'>
                  <span class='name'>running</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Check if the thread was created and isn&#8217;t dead
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000029-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000029-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 229</span>&#x000A;229:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">running</span>&#x000A;230:       <span class="ruby-ivar">@listener_thread</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@listener_thread</span>.<span class="ruby-identifier">status</span>&#x000A;231:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000023'>
                <a name='M000023'></a>
                <div class='synopsis'>
                  <span class='name'>send</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000023-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000023-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 199</span>&#x000A;199:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;200:       <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;This method is deprecated and will be removed on the next release. Use 'publish' instead&quot;</span>)&#x000A;201:       <span class="ruby-identifier">publish</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;202:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000017'>
                <a name='M000017'></a>
                <div class='synopsis'>
                  <span class='name'>subscribe</span>
                  <span class='arguments'>(destination, headers = {}) {|msg| ...}</span>
                </div>
                <div class='description'>
                  <p>
                  Subscribe to a destination, must be passed a block which will be used as a
                  callback listener
                  </p>
                  <p>
                  Accepts a transaction header ( :transaction =>
                  &#8216;some_transaction_id&#8217; )
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000017-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000017-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 142</span>&#x000A;142:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">subscribe</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;143:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;No listener given&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block_given?</span>&#x000A;144:       <span class="ruby-ivar">@listeners</span>[<span class="ruby-identifier">destination</span>] = <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">msg</span>}&#x000A;145:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">subscribe</span>(<span class="ruby-identifier">destination</span>, <span class="ruby-identifier">headers</span>)&#x000A;146:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000020'>
                <a name='M000020'></a>
                <div class='synopsis'>
                  <span class='name'>unreceive</span>
                  <span class='arguments'>(message)</span>
                </div>
                <div class='description'>
                  <p>
                  Unreceive a message, sending it back to its queue or to the DLQ client
                  acknowledgement ( connection.subscribe &#8220;/queue/a&#8220;, :ack =>
                  &#8216;client&#8217;g
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000020-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000020-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 178</span>&#x000A;178:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unreceive</span>(<span class="ruby-identifier">message</span>)&#x000A;179:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">unreceive</span> <span class="ruby-identifier">message</span>&#x000A;180:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000018'>
                <a name='M000018'></a>
                <div class='synopsis'>
                  <span class='name'>unsubscribe</span>
                  <span class='arguments'>(name, headers = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Unsubecribe from a channel
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000018-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000018-source'>     <span class="ruby-comment cmt"># File lib/stomp/client.rb, line 149</span>&#x000A;149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unsubscribe</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span> = {})&#x000A;150:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">unsubscribe</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">headers</span>)&#x000A;151:       <span class="ruby-ivar">@listeners</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">nil</span>&#x000A;152:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
